{"version":3,"sources":["../lib/completions.ts"],"sourcesContent":["import { AxiosResponse } from \"axios\";\nimport ZhipuAI from \"./zhipu-ai.js\";\n\nexport type MessageOptions = {\n    role: \"system\" | \"user\" | \"assistant\" | \"function\"\n    content: string\n}\n\nexport type CreateCompletionsOptions = {\n    model: string,\n    messages: Array<MessageOptions>,\n    request_id?: string,\n    do_sample?: boolean,\n    stream?: boolean,\n    temperature?: number,\n    top_p?: number,\n    max_tokens?: number,\n    seed?: number,\n    stop?: Array<string>,\n    sensitive_word_check?: object,\n    tools?: object,\n    tool_choice?: string,\n    extra_headers?: object,\n    disable_strict_validation?: boolean,\n    timeout?: number,\n}\n\nexport type ResponseMessage = {\n    id: string,\n    created: number,\n    model: string,\n    choices: Array<{\n        index: number,\n        finish_reason: string,\n        message: {\n            role: string,\n            content: string,\n            tool_calls: Array<{\n                id: string,\n                type: string,\n                function: {\n                    name: string,\n                    arguments: object,\n                }\n            }>\n        },\n        delta: {\n            role: string,\n            content: string,\n            tool_calls: Array<{\n                id: string,\n                type: string,\n                function: {\n                    name: string,\n                    arguments: object,\n                }\n            }>\n        }\n    }>,\n    usage: {\n        prompt_tokens: number,\n        completion_tokens: number,\n        total_tokens: number,\n    },\n}\n\nexport default class Completions {\n    constructor(private readonly app: ZhipuAI) {\n    }\n\n    public async create(options: CreateCompletionsOptions): Promise<AxiosResponse<ResponseMessage>> {\n        return this.app.post(\"/chat/completions\", {\n            \"model\": options.model,\n            \"request_id\": options.request_id,\n            \"temperature\": options.temperature,\n            \"top_p\": options.top_p,\n            \"do_sample\": options.do_sample,\n            \"max_tokens\": options.max_tokens,\n            \"seed\": options.seed,\n            \"messages\": options.messages,\n            \"stop\": options.stop,\n            \"sensitive_word_check\": options.sensitive_word_check,\n            \"stream\": options.stream,\n            \"tools\": options.tools,\n            \"tool_choice\": options.tool_choice,\n        }, {\n            headers: options.extra_headers,\n            responseType: options.stream ? 'stream' : 'json'\n        })\n    }\n} "],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAkEA,IAAqB,cAArB,MAAiC;AAAA,EAC7B,YAA6B,KAAc;AAAd;AAAA,EAC7B;AAAA,EAEa,OAAO,SAA4E;AAAA;AAC5F,aAAO,KAAK,IAAI,KAAK,qBAAqB;AAAA,QACtC,SAAS,QAAQ;AAAA,QACjB,cAAc,QAAQ;AAAA,QACtB,eAAe,QAAQ;AAAA,QACvB,SAAS,QAAQ;AAAA,QACjB,aAAa,QAAQ;AAAA,QACrB,cAAc,QAAQ;AAAA,QACtB,QAAQ,QAAQ;AAAA,QAChB,YAAY,QAAQ;AAAA,QACpB,QAAQ,QAAQ;AAAA,QAChB,wBAAwB,QAAQ;AAAA,QAChC,UAAU,QAAQ;AAAA,QAClB,SAAS,QAAQ;AAAA,QACjB,eAAe,QAAQ;AAAA,MAC3B,GAAG;AAAA,QACC,SAAS,QAAQ;AAAA,QACjB,cAAc,QAAQ,SAAS,WAAW;AAAA,MAC9C,CAAC;AAAA,IACL;AAAA;AACJ;","names":[]}